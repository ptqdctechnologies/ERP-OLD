<script type="text/javascript">

    function edit (ID)
    {
        myPanel = Ext.getCmp('abs-budget-panel');
        myPanel.body.load({
        url: '/sales/requestprice/editrequest/id/' + ID,
        scripts : true
        });
    }

    Ext.onReady(function(){

        Ext.QuickTips.init();

        var trano = '<?=$this->trano?>';

        var requeststore = new Ext.data.Store ({

            url:'/sales/requestprice/getrequestprice/trano/' + trano + '/all/' + true,
                autoLoad:true,
                reader: new Ext.data.JsonReader ({
                    root:'data',
                    totalProperty:'total',
                    fields:[{
                        name:'trano'
                    },{
                        name:'tgl',type:'date',dateFormat:'Y-m-d H:i:s'
                    },{
                        name:'uid'
                    },{
                        name:'nama_brg'
                    },{
                        name:'spec'
                    },{
                        name:'sup_nama'
                    },{
                        name:'alamat'
                    },{
                        name:'tlp'
                    },{
                        name:'email'
                    },{
                        name:'master_kota'
                    },{
                        name:'uom'
                    },{
                        name:'fraco'
                    },{
                        name:'price'
                    },{
                        name:'fax'
                    },{
                        name:'val_kode'
                    },{
                        name:'contact'
                    }]
                })

        })

        var requestgrid = new Ext.grid.GridPanel ({

            store:requeststore,
            renderTo:'grid',
            height:300,
            frame:true,
            columns:[new Ext.grid.RowNumberer(),{
                header:'Action',
                width:60,
                sortable:true,
                dataIndex: 'id',
                css:'text-align:center;',
                renderer: function (v,p,r) {
                        return '<a href="#" onclick="edit(\'' + r.id + '\')"><img src="/images/g_rec_upd.png"></a>&nbsp;';
                }
            },{
                header:'Trano',
                dataIndex:'trano',
                sortable:true
            },{
                header:'Uid',
                dataIndex:'uid',
                sortable:true
            },{
                header:'Date',
                dataIndex:'tgl',
                sortable:true,
                renderer: Ext.util.Format.dateRenderer('d M Y')
            },{
                header:'Material Name',
                dataIndex:'nama_brg',
                sortable:true
            },{
                header:'Spec',
                dataIndex:'spec',
                sortable:true
            },{
                header:'Satuan',
                dataIndex:'uom',
                sortable:true
            },{
                header:'Franco',
                dataIndex:'fraco',
                sortable:true
            },{
                header:'Supplier Name',
                dataIndex:'sup_nama',
                sortable:true
            },{
                header:'Supplier Address',
                dataIndex:'alamat',
                sortable:true
            },{
                header:'Supplier City',
                dataIndex:'master_kota',
                sortable:true
            },{
                header:'Supplier Phone',
                dataIndex:'tlp',
                sortable:true
            },{
                header:'Supplier Fax',
                dataIndex:'fax',
                sortable:true
            },{
                header:'Supplier Email',
                dataIndex:'email',
                sortable:true
            },{
                header:'Contact Person',
                dataIndex:'contact',
                sortable:true
            },{
                header:'Valuta',
                dataIndex:'val_kode',
                sortable:true
            },{
                header:'Material Price',
                dataIndex:'price',
                sortable:true,
                align:'right',
                renderer: function(v){
                        return v ? Ext.util.Format.number(v, '0,0.00') : '';
                }
            }]

        })


    })


</script>

    <div id="grid"></div>