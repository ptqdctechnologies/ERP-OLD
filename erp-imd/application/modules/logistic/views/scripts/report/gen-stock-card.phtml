<?php
if (count($this->result) == 0) {
    echo "No Data to display...";
    die();
}
?>
<?php
//if (!$this->flagSaldo)  {
//    echo "Harap Tentukan Saldo Awal";
//    die();
//}
//
?>
<style type="text/css">

    .parentContainer{
        margin: 5px;
        padding-left: 100px;
        border: none;
        width: 900px;
        height: 750;
        overflow:  inherit;
        font-size: 12px;
    }
    .parentContainer2{
        font-size: 12px;
        padding-left: 70px;
    }
    .tdstyle{
        padding-left: 10px;
    }
    .title{
        font-size: 16px;
    }
    .stockTable {
        width: 100%;
        font-size: 10px;
        font-weight: normal;
    }


    /*.datagrid table { border-collapse: collapse; 
                     text-align: left; 
                     width: 100%; }
    .datagrid {font: normal 11px Arial, Helvetica, sans-serif; 
              background: #fff; 
              overflow: hidden; 
              border: 1px solid #B6C1D1; 
              -webkit-border-radius: 3px; 
              -moz-border-radius: 3px; border-radius: 3px; }
    .datagrid table td, .datagrid table th {width: 50px; padding: 3px 10px; }
    .datagrid table td, .datagrid table th {padding: 3px 10px; }
    .datagrid table td, .datagrid table th .no{width:20px;}
    .datagrid table td, .datagrid table th .bal{width:30px;}
    .datagrid table td, .datagrid table th .product{width:50px;}
    .datagrid table td, .datagrid table th .productname{width:200px;}
    .datagrid table thead th {
        alignment-adjust: background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #CFDCEE), 
                                 color-stop(1, #CFDCEE) );
                             background:-moz-linear-gradient( center top, #CFDCEE 5%, #CFDCEE 100% );
                             filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#CFDCEE', endColorstr='#CFDCEE');
                             background-color:#CFDCEE; color:#000000; font-size: 11px; font-weight: normal; 
                             border: 1px solid #8A929E; } 
    .datagrid table thead th:first-child { border: 1px solid #8A929E; }
    .datagrid table tbody td { color: #000000; border-left: 1px solid #8A929E;font-size: 11px;font-weight: normal; }
    .datagrid table tbody .alt td { background: #E1EEF4; color: #00496B; }
    .datagrid table tbody td:first-child { border-left: none; }
    .datagrid table tbody tr:last-child td { border-bottom: none; }
    .datagrid table tfoot td div { border-top: 1px solid #B6C1D1;background: #E1EEF4;} 
    .datagrid table tfoot td { padding: 0; font-size: 11px } 
    .datagrid table tfoot td div{ padding: 2px; }
    .datagrid table tfoot td ul { margin: 0; padding:0; list-style: none; text-align: right; }
    .datagrid table tfoot  li { display: inline; }
    .datagrid table tfoot li a { text-decoration: none; display: inline-block;  padding: 2px 8px; margin: 1px;color: #FFFFFF;border: 1px solid #006699;-webkit-border-radius: 3px; -moz-border-radius: 3px; border-radius: 3px; background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #006699), color-stop(1, #00557F) );background:-moz-linear-gradient( center top, #006699 5%, #00557F 100% );filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#006699', endColorstr='#00557F');background-color:#006699; }
    .datagrid table tfoot ul.active, .datagrid table tfoot ul a:hover { text-decoration: none;border-color: #006699; 
            color: #FFFFFF; background: none; background-color:#00557F;}*/

</style>


<div align="left" style="padding-left: 70px;"><img src="/images/imd.gif" alt= "logo imd" /></div>
<br />
<br />
<div class="title" align="center"><b>General Stock Card Report</b></div>
<div class="title" align="center"><b><?= $this->nama_gdg;?></b></div>
<br />

<!--<h3>MATERIAL FROM SUPPLIER REPORT</h3>-->
<table class="parentContainer2">

    <tr>
        <td>Date Printed</td> 
        <td>:</>
        <td class="tdstyle"><? echo date("Y-m-d") ?></td>       

    </tr>   
<!--    <tr>
        <td>Product Code</td> 
        <td>:</>
        <td class="tdstyle"><? echo $this->productid ?></td>       

    </tr>   
    <tr>
        <td>Product Name</td>     
        <td>:</>
        <td class="tdstyle"><? echo $this->productname ?></td>                       
    </tr>-->
<!--    <tr>
        <td>Balance</td>     
        <td>:</>
        <td class="tdstyle"><? //echo number_format($this->saldoawal, 2)           ?></td>                       
    </tr>-->
</table>

<br />

<!--<div class="datagrid"><table>
        <thead>
            <tr>
                <th class="no">header</th>
                <th class="product">header</th>
                <th class="productname">tes</th>
                <th colspan="3">header</th>
            </tr>
            <tr>
                <th>header</th>
                <th>header</th>
                <th>header</th>
                <th class="bal">header</th>
                <th class="bal">header</th>
                <th class="bal">header</th>
                
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>data</td>
                <td>data</td>
                <td>data</td>
                <td>data</td>
            </tr>
           
        </tbody>
    </table></div>-->

<div class="parentContainer">
    <?php // if($this->temp!='') $this->temp.cou ?>
    <table id="budgetTable"class="stockTable">
        <thead id="fixed">
            <tr>
                <th scope="col" rowspan="2">No</th>
                <th scope="col" rowspan="2"><center>Product ID</center></th>
        <th scope="col" rowspan="2" ><center>Product Name</center></th>
        <th scope="col" rowspan="2" ><center>UoM</center></th>
        <th scope="col" colspan="<?= count($this->gudang) ?>" style="border: 1px solid #8A929E;"><center>Balance</center></th>
        </tr>
        </thead>
        <thead id="fixed">
            <tr >
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <th scope="col"></th>
                <?php foreach ($this->gudang as $keys => $value) { ?>
                    <th scope="col" style="border: 1px solid #8A929E;" align="center"><center><?= $value['gdg_nama'] ?></center></th>
                    <? } ?>
            </tr>

        </thead>
        <tbody>


            <?php
            if ($this->result != '') {
                $nomer = $this->current;
                $tmp = array();
                $total = 0;
                $i = 0;
                $j = 1;
              

                foreach ($this->result as $k => $v) {
//                    var_dump(current($this->result[$k]).'-'.next($v));
                    ?>
                    <tr> 
                        <td><?= $nomer ?></td>                          
                        <td><?= $v['kode_brg'] ?></td>
                        <td><?= $v['nama_brg'] ?></td>
                        <td><?= $v['sat_kode'] ?></td>
                        <?php foreach ($this->gudang as $key => $val) { ?>
                            <?php
                                $b=0;
                                foreach ($v['total_balance'] as $key2 => $val2) { 
                                    if ($val2['gdg_kode'] == $val['gdg_kode'])
                                    {
                                        $b = $val2['balance'];
                                        break;
                                    }
                                }
                                
                             ?> 
                            <td><center><b><?=$b?></b></center></td>     
                    <?php } ?> 
                </tr>

                <?php
                $nomer++;
            }
            ?>

<?php } ?>
        </tbody>
    </table>
</div>
<?= $this->pagingDefault($this->pageUrl, $this->totalResult, $this->limitPerPage, $this->current, $this->currentPage, $this->pagingParam) ?>

<script type="text/javascript">



    function gotoDetail(trano)
    {
        myPanel = Ext.getCmp('abs-budget-panel');
        myPanel.body.load({
            url: '/report/podetail/trano/' + trano,
            scripts: true

        });
    }


    (function() {
        var mySt = new superTable("budgetTable", {
            cssSkin: "sSky",
            fixedCols: 2,
            headerRows: 1
        });
    })();

    ///

</script>